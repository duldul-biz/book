# FFmpeg

## 知识搜索
总的：https://blog.csdn.net/leixiaohua1020/article/details/15811977

基础：https://blog.csdn.net/leixiaohua1020/article/details/18893769

## 1、互联网视频文件
### 解协议
网络传播用的是流媒体协议 HTTP RTMP MMS 解析为标准的相应的封装格式数据
### 解封装
分离成音频流压缩编码数据 和 视频流压缩编码数据 例如FLV解封装为H.264编码的视频码流 和 AAC编码的音频码流
### 解码音视频
解码为非压缩的视频、音频原始数据 音频的压缩编码标准包含  AAC  MP3  AC-3等  视频的压缩编码标准有H.264 MPEG2  VC-1  
压缩编码的视频数据输出成非压缩的颜色数据  YUV420p  RGB 
### 音视频同步
同步解码出来的视频和音频数据 并将视频 音频数据送至 显卡和声卡


## 2、视频数据处理
https://blog.csdn.net/leixiaohua1020/article/details/50534150

1. YUV 420p 256*256*1byte 这个是Y分量亮度  色度U=128*128*1byte V=128*128*1byte 采样密度不一样
2. YUV 444p 256*256*1byte 这个是Y分量亮度  色度U=256*256*1byte V=256*256*1byte 采样密度一样
3. YUV 420p去掉颜色 memset(pic+w*h,128,w*h/2); 色度分量取值0至255，无色对应的就是128
4. YUV420P像素数据的亮度减半 取出Y 然后除以2
5. YUV420P格式的灰阶测试图 就是生成YUV（0，128,128）、（28，128,128）....（255，128,128）
6. PSNR：取值通常情况下都在20-50的范围内，取值越高，代表两张图像越接近，反映出受损图像质量越好。
MSE=两张图的差值的平方均值
![](Img/![](Img/2020-07-27-09-04-07.png).png)
7. 类似于YUV420的排布格式叫Planar 类似RGB24的排布格式叫Packed
8. 将RGB24格式像素数据封装为BMP图像：
BMP采用的是小端（Little Endian）存储方式。这种存储方式中存储的先后顺序为B、G、R。给RGB格式文件加BMP头和将RB数据调换
9. 将RGB24格式像素数据转换为YUV420P格式像素数据
![](Img/2020-07-27-09-17-56.png)
10. 彩条侧视图
![](Img/11.%20.png)